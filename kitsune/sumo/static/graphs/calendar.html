<!DOCTYPE html>
<meta charset='utf-8'>
<style>
</style>
<body>

<div id='viz'></div>

<button id="embiggen">embiggen</button>

<script src='../js/libs/d3.js'></script>
<script src='../js/libs/d3.chart.js'></script>
<script src='../js/graphs/utils.js'></script>
<script src='../js/graphs/base.js'></script>
<script src='../js/graphs/calendarheatmap.js'></script>
<script>

    var G = k.graph;

    var data = [];
    var now = new Date();
    var dataStart = new Date(now.getFullYear() - 1, now.getMonth(), now.getDay());
    var timestamp;
    var ONEDAY = 24 * 60 * 60 * 1000;

    for (timestamp = +dataStart; timestamp <= now; timestamp += ONEDAY) {
        data.push({
            date: new Date(timestamp),
            hottness: Math.floor(Math.random() * 10),
            username: 'Bob',
        })
    }

    var formatter = G.format('<b>{0.username}</b> - {0.heat} - {1}',
        G.ident, G.compose(G.get('date'), d3.time.format('%b %d')));

    var chart = d3.select('#viz')
        .chart('CalendarHeatMap')
        .tooltipFormat(formatter)
        .heat(G.get('hottness'));

    chart.draw(data);

    var grow = true;
    document.querySelector('#embiggen').addEventListener('click', function(e) {
        if (grow) {
            chart.width(10000).height(200).draw(data);
        } else {
            chart.width(10000).height(100).draw(data);
        }
        grow = !grow;
    });

</script>

